# ShopFast - Starter Code

This directory contains the starter code for the ShopFast e-commerce application. The code has been intentionally configured with issues that you will troubleshoot and fix during the course.

## Prerequisites

Before deploying the starter code, ensure you have:

1. Completed the infrastructure bootstrap (`../bootstrap_scripts/bootstrap.sh`)
2. The `env.sh` file generated by bootstrap (contains service endpoints)
3. AWS CLI configured with appropriate permissions
4. Node.js 24+ and npm installed
5. Python 3.11 installed
6. AWS SAM CLI installed
7. uv package manager installed

## Directory Structure

```
starter_code/
├── README.md                    # This file
├── ARCHITECTURE.md              # System architecture documentation
├── frontend/                    # React 18 frontend application
│   ├── package.json
│   ├── public/
│   └── src/
└── lambdas/                     # AWS Lambda functions
    ├── product-service/         # Product catalog service (GET products)
    ├── order-service/           # Order management service (POST/GET orders)
    ├── inventory-service/       # Inventory management service
    └── notification-handler/    # SNS notification processor
```

## Deployment Order

Deploy the services in this order:

1. **Lambda Functions** - Deploy all Lambda functions (product, order, inventory, notification)
2. **Frontend** - Deploy React app to S3/CloudFront

## Quick Start

### 1. Source Environment Variables

```bash
source ../bootstrap_scripts/env.sh
```

### 2. Deploy Lambda Functions

```bash
# Deploy all Lambda functions using SAM
cd lambdas/product-service
sam build && sam deploy --guided

cd ../order-service
sam build && sam deploy --guided

cd ../inventory-service
sam build && sam deploy --guided

cd ../notification-handler
sam build && sam deploy --guided
```

### 3. Deploy Frontend

```bash
cd frontend
npm install
npm run build
aws s3 sync build/ s3://$FRONTEND_BUCKET --delete
aws cloudfront create-invalidation --distribution-id $CLOUDFRONT_DIST_ID --paths "/*"
```

## Testing the Application

After deployment, access the application at:
- **Frontend**: `https://<cloudfront-distribution>.cloudfront.net`
- **API**: Lambda Function URL available in `env.sh` as `$API_ENDPOINT`

## Known Issues

This starter code contains intentional issues for you to troubleshoot. During the course, you will:

1. Identify symptoms of problems
2. Use AWS observability tools to diagnose root causes
3. Apply fixes and verify resolution

Do not look at the `solution_code` directory until you've attempted troubleshooting on your own!

## Service Endpoints (After Bootstrap)

| Service | Endpoint |
|---------|----------|
| Product Service | `$API_ENDPOINT` (Lambda Function URL) |
| Frontend | `$CLOUDFRONT_URL` |
| DynamoDB Tables | products, inventory, orders |
| ElastiCache | `$REDIS_ENDPOINT` |

## Getting Help

If you encounter issues with the infrastructure (not the planted bugs):

1. Check the bootstrap verification: `../bootstrap_scripts/scripts/verify-deployment.sh`
2. Review CloudFormation stack events in the AWS Console
3. Check CloudWatch Logs for service-specific logs

## Next Steps

1. Access the frontend and try placing an order
2. Observe the errors and symptoms
3. Use CloudWatch Logs, X-Ray, and CloudWatch Metrics to investigate
4. Fix the issues and redeploy
